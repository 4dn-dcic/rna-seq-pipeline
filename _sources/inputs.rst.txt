Inputs
====================================================
This page shows an example input for each workflow associated to the RNA-sequencing pipeline. After example, each input item is described individually in more detail.

Merge Annotation
-----------------
Example input for this workflow looks like this::

    {
        "merge_anno.annotation" : "rna-seq-pipeline/test_data/gencode.v24.primary_assembly.annotation.gtf.gz",
        "merge_anno.tRNA" : "rna-seq-pipeline/test_data/gencode.v24.tRNAs.gtf.gz",
        "merge_anno.spikeins" : "rna-seq-pipeline/test_data/ERCC_phiX.fa.gz",
        "merge_anno.output_filename" : "merged_annotation.gtf.gz"
    } 

Description of inputs
^^^^^^^^^^^^^^^^^^^^^^

* ``merge_anno.annotation`` Is the comprehensive gene annotation on the primary assembly (chromosomes and scaffolds) sequence regions. 
* ``merge_anno.tRNA`` Is tRNA genes predicted by ENSEMBL on the reference chromosomes using tRNAscan-SE.
* ``merge_anno.spikeins`` Is the spikein dataset used in the experiment. For more information and downloads look at `spikein pages found on ENCODE portal <https://www.encodeproject.org/search/?type=Reference&reference_type=spike-in>`_.
* ``merge_anno.output_filename`` Is the name you want to give the output file (include gtf.gz postfix here).

Build Index
-------------
Example input for this workflow looks like this::

    {
        "build_index.reference_genome" : "rna-seq-pipeline/test_data/GRCh38_no_alt_analysis_set_GCA_000001405.15_onlychr19.fa.gz",
        "build_index.spikeins" : "rna-seq-pipeline/test_data/ERCC_phiX.fa.gz",
        "build_index.annotation" : "rna-seq-pipeline/test_data/gencodeV24pri-tRNAs-ERCC-phiX_onlychr19_and_spikeins.gtf.gz",
        "build_index.anno_version" : "v24",
        "build_index.genome" : "GRCh38",
        "build_index.index_type" : "prep_star"
    }

Description of inputs
^^^^^^^^^^^^^^^^^^^^^^

* ``build_index.reference_genome`` Is the reference genome. For more information and downloads, look at `references page on ENCODE portal <https://www.encodeproject.org/data-standards/reference-sequences/>`_ and `ENCSR425FOI on ENCODE portal <https://www.encodeproject.org/references/ENCSR425FOI/>`_.
* ``build_index.spikeins`` Is the spikein dataset used in the experiment. For more information and downloads look at `spikein pages found on ENCODE portal <https://www.encodeproject.org/search/?type=Reference&reference_type=spike-in>`_.
* ``build_index.annotation`` Is the output produced by the Merge Annotation step.   
* ``build_index.anno_version`` Is the annotation version.
* ``build_index.genome`` Is the reference genome type (GRCh38, hg19, mm10 or mm9).
* ``build_index.index_type`` Is the type of index you are building (prep_star, prep_rsem or prep_srna)

RNA-sequencing pipeline
------------------------
Example input for this workflow looks like this::

    {
        "rna.fastqs_R1" : ["/Users/otto/Documents/RNASeq/Testfiles/longPE/original/ENCSR142YZV_rep1_1_star_genome_sorted_chr19only_R1.fastq.gz", "/Users/otto/Documents/RNASeq/Testfiles/longPE/original/ENCSR142YZV_rep2_1_star_genome_sorted_chr19only_R1.fastq.gz"],
        "rna.fastqs_R2" : ["/Users/otto/Documents/RNASeq/Testfiles/longPE/original/ENCSR142YZV_rep1_1_star_genome_sorted_chr19only_R2.fastq.gz", "/Users/otto/Documents/RNASeq/Testfiles/longPE/original/ENCSR142YZV_rep2_1_star_genome_sorted_chr19only_R2.fastq.gz"],
        "rna.aligner" : "star",
        "rna.index" : "/Users/otto/Documents/RNASeq/Testfiles/longPE/test_align_script/GRCh38_v24_ERCC_phiX_starIndex_onlychr19.tgz",
        "rna.endedness" : "paired",
        "rna.align_ncpus" : 3,
        "rna.align_ramGB" : 4,
        "rna.bamroot" : "foo_bam",
        "rna.strandedness" : "unstranded",
        "rna.strandedness_direction" : "unstranded",
        "rna.chrom_sizes" : "/Users/otto/Documents/RNASeq/Testfiles/GRCh38_EBV.chrom.sizes",
        "rna.rsem_index" : "/Users/otto/Documents/RNASeq/Testfiles/prep-RSEM/Result/GRCh38_v24_ERCC_phiX_rsemIndex_onlychr19.tgz"
        "rna.disks" : "local-disk 200 HDD"
    }

Description of inputs
^^^^^^^^^^^^^^^^^^^^^^

* ``rna.fastqs_R1`` Is a list of gzipped fastq files. In paired-end mode these are the read 1 fastqs. In single-ended mode, put the fastqs here. If your experiment consists of several replicates, list all corresponding read 1 fastq.gz files. 
* ``rna.fastqs_R2`` Is a list of gzipped fastq files. In paired-end mode these are the read 2 fastqs. In single-ended mode, enter [].

**NOTE**: In case the experiment is paired-end, and consists of several replicates, take in account that the order of fastq files in the previous two arguments matter. For example, suppose the experiment has 3 replicates rep1, rep2 and rep3 with files ``rep1_R1.fastq.gz``, ``rep1_R2.fastq.gz``, ``rep1_R3.fastq.gz``, ``rep2_R2.fastq.gz``, ``rep3_R1.fastq.gz`` and ``rep3_R2.fastq.gz``. In this case ``fastqs_R1=["rep1_R1.fastq.gz", "rep2_R1.fastq.gz", "rep3_R1.fastq.gz"]``, and ``fastqs_R2=["rep1_R2.fastq.gz", "rep2_R2.fastq.gz", "rep3_R2.fastq.gz"]``.

* ``rna.aligner`` This variable is for possible future extension. For now, always enter "star".
* ``rna.index`` Is the path to STAR index (`downloaded from accession ENCSR314WMD <https://www.encodeproject.org/references/ENCSR314WMD/>`_ or) produced by the Build Index step.
* ``rna.endedness`` Is the endedness or the experiment ("paired" or "single").
* ``rna.align_ncpus`` Is the number of cpus used for computation.
* ``rna.align_ramGB`` Is the amount of memory in GB.
* ``rna.bamroot`` Is the root for the name of output bams. For example "foo_bar_baz" produces foo_bar_baz_genome.bam and foo_bar_baz_anno.bam, prefixed by rep_[REP NUMBER]. This will also affect downstream filenames. More on the `output description page <outputs.html>`_.
* ``rna.strandedness`` Is the experiment stranded, or not ("stranded" or "unstranded").
* ``rna.strandedness_direction`` Is the strandedness direction ("forward", "reverse" or "unstranded")
* ``rna.chrom_sizes`` Is the chromosome sizes file. For more information and downloads see `ENCODE portal <https://www.encodeproject.org/references/ENCSR425FOI/>`_.
* ``rna.rsem_index`` Is the path to RSEM index (`downloaded from accession ENCSR219BJA <https://www.encodeproject.org/references/ENCSR219BJA/>`_ or) produced by the Build Index step.
* ``rna.disks`` Is an optional parameter, that defaults to 100GB of SSD drive. For a typical RNA-experiment 100GB is a stretch. Typically the fastq.gz files are about 5GB, and the .bam files that are output are 10-20GB, and additionally the STAR index is 25GB in compressed format. For example, if the experiment would be paired end with 3 replicates these filesizes would add up to TOTAL = 3 * 5GB * 2 (paired end!) + 3 * 15GB * 2 (genome .bam and annotation .bam for each replicate) + 25GB = 145GB. It is usually better to err to the side of caution when determining the disk size (cost of storage is usually small compared to the cost of computation), and in this case it would be prudent to allocate at least "local-disk 250 HDD" or "local-disk 250 SSD". 